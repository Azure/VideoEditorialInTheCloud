<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
“Editorial in the Cloud” Project.

Cloud Video Editorial Deployment Guide.
Date: 19-September-2019

Overview.
Effective cloud-based video editing relies on the ability to use the cloud to edit high-resolution / high-bitrate content with low latency in a secure fashion from any location. Once a futuristic notion, it is currently in use by some of the largest media companies in the world, who are now using the cloud to fully edit media on scalable, high-performance, highly-redundant environments.
The cloud enables greater collaboration while decreasing time to market for editing operations, as more work can be done faster by disparate teams working together. It empowers enterprise media organizations to spin up additional resources to take on more projects, without the capital expense required to set up and maintain on-premises environment. This provides great potential for organizations of all sizes to drive higher efficiency, leverage talent from any region, and deliver their content faster.
The following document outlines the process for standup of Video Editorial in the Cloud using Avid Products and Solutions in Microsoft Azure. When deployed, it emulates the environments used by enterprise post-production clients who are using a cloud editorial system running in their own Enterprise Azure cloud subscriptions. The guidelines below describe how users can create their own Avid editing environment on Azure and deploy / configure Avid Media Composer and the Avid NEXIS file system integrated with Azure cloud storage. This setup will enable seamless editorial workflows, using the Teradici client to access and edit content remotely and securely, and using Signiant to provide accelerated and secure file transfer from on-premise to NEXIS in Azure.
The guidelines below provide a comprehensive, step-by-step guide for a technical audience, including media engineers with Azure deployment experience. Prior experience with Azure deployments is highly recommended for a reasonable expectation of success. Avid is pleased to present these guidelines as an exciting new collaborative development in Cloud Editorial technology with our valued technology partners. It is a new venture that is provided to the GitHub Community as a trial for such deployment. Note that it is not a final or formal product, and does not cover all possible Video Editorial workflows. General Security Best Practices for Cloud Editorial Deployment (e.g. secure cloud environment configuration, SSH Key Setup, etc.) should be followed; however, specific details are out of scope of this document. For further guidance, please refer to the following guide: https://docs.microsoft.com/en-us/azure/security/fundamentals/network-best-practices Please note that the guidelines presented are provided "as is", without warranty of any kind, express or implied, including but not limited to the warranties of merchantability, fitness for a particular purpose and noninfringement. In no event shall the authors or copyright holders be liable for any claim, damages or other liability, whether in an action of contract, tort or otherwise, arising from, out of or in connection with the guidelines or the use or other dealings in the guidelines.
2
Sections.
1. Prerequisites.
2. Resource Deployment.
3. Avid Media Composer Configuration.
4. Avid NEXIS Storage Configuration.
5. Signiant Upload Portal Configuration.
Appendix A: Verifying Resource Quota.
Appendix B: Deployment Installer Access.
Appendix C: Troubleshooting.
1. Prerequisites.
You will require an active enterprise or pay-as-you-go Azure subscription with proper rights to create the required Azure resources.
You will also require to secure from the appropriate vendors, and then deploy the following licenses:
- Avid NEXIS | Cloud
- Avid Media Composer | Ultimate
- Avid Media Composer VM Option
- Signiant Media Shuttle
- Teradici Graphics Agent
You will need to have the following installers available in a location accessible to the deployment. For more information, please refer to Appendix B attached:
- Avid Media Composer
- Avid NEXIS Client (2019.4 or higher)
- Nvidia GRID drivers
- Teradici PCoIP Graphics Agent for Windows
- Signiant Media Shuttle
Avid Media Composer requires Nvidia-enabled VMs (NV/NVv3 series). Please check the availability of NV Family VMs per region here:
https://azure.microsoft.com/en-us/global-infrastructure/services/?products=virtual-machines&regions=all
Please Note: If you proceed with deployment in a region where NV or NVv3 Family VMs are not available (or where your subscription does not allow for their deployment), the deployment will not succeed. You will also need to manually clean up any resources that may be deployed into your subscription. A minimum of 12 NV/NVv3 Compute-VMs (Core/vCPU) are required for each Media Composer VM. You can submit a support request to increase quota limits for specific compute VM types through the Azure portal. Further details of this process can be found in Appendix A attached. Limitations of trial accounts prevent the creation of NV/NVv3 Family VMs. For all other accounts you should verify that the subscription has enough available quota to support the deployment. Please Refer to Appendix A attached for details on verifying your account. More information is provided here: https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits
3
2. Resource Deployment.
A deployment template has been provided to simplify the deployment of all resources here: https://github.com/Azure/VideoEditorialInTheCloud .
In the README file, you will find a button labeled Deploy to Azure. This will redirect you to a Login page for Azure (or directly to the template if you are already signed in). The template will deploy several resources required to support video editing in Azure including an Avid Media Composer VM and Avid NEXIS | Cloud. A full description of all the fields is provided below to assist in completing the deployment.
While this deployment pattern is likely to work in all regions, the following regions have been validated: • US East • US West • US South Central • North Europe • Japan East (Standard NV only) • UK South (Standard NV only) Regardless of which region you deploy resources into, Avid recommends verification of the resource quota on your subscription before you begin. Please refer to Appendix A attached for instructions on this is required. If you would like to modify anything with this deployment, click Edit Template on the deployment page. (These modifications will not be covered here.)
4
Basics Subscription The subscription where the resources will to be deployed. If you have more than one, ensure you have the correct one selected.
Resource Group
A logical group of resources inside of Azure. You can either select an existing resource group or create a new resource group for the deployment which is recommended. Location The Azure region where the deployment will create resources. It is recommended for this to be geographically close to the location where the editors will be.
Settings General-Admin Username The username that will be used as the administrator user on all VMs. Avid NEXIS VM default admin user is avid.
General-Admin Password
The password that will be used by the administrator user specified above. General-Name Prefix System Name prefix for all VM resources created for Cloud Edition. 3-char min, 7-char max, lower case alphanumeric.
General-New or Existing Vnet
Determines whether an existing virtual network will be used or if a new virtual network will be created. New is recommended. General-Vnet Name The name of the virtual network. If new this will be used as the name for the generated network. If existing this virtual network must already exist.
General-Vnet Resource Group
The resource group where the virtual network resides. If new this should be the same as the resource group specified under Basics. If existing this should be the name of the virtual network where the existing virtual network already exists. General-Subnet Name The name of the subnet inside of the virtual network. If new this will be the name given to the created subnet. If existing this should be the name of an existing subnet inside of the virtual network.
General-Address Space
The address space used by the virtual network. If creating a new virtual network, it is recommended to use the default. General-Address Subnet The address space used by the subnet in the virtual network. It must be a subset of the larger block used above. If creating a new virtual network, it is recommended to use the default.
Media Composer-Vm Size
The size of the VM that will be used for the Media Composer systems. Refer to Appendix A for verification and quota increases. Media Composer-Instances The number of Media Composer VMs to be deployed. A minimum of one VM is required.
Nexis-Address Static
(optional) The private IP address for Avid NEXIS. If specified, this must be in the address space of the subnet specified above. If not specified, a static address is assigned during deployment.
5
System-Install URL The URL for the storage account where the product installers are located. Do not include a trailing slash. Refer Appendix B to more detail.
System-Media Composer Client
The filename of Media Composer installer ZIP available in the installers blob container. The default may differ from what you provide, so you will need to update accordingly. System-Teradici Agent The filename of Teradici Graphics Agent EXE available in the installers blob container. The default may differ from what you provide, so you will need to update accordingly.
System-Nvidia Driver
The filename of Nvidia GRID drivers EXE available in the installers blob container. The default may differ from what you provide, so you will need to update accordingly. System-Nexis Windows Client The filename of the Avid NEXIS Windows Client MSI available in the installers blob container. The default may differ from what you provide, so you will need to update accordingly.
System-Signiant Client
The filename of the Signiant Media Shuttle TAR.GZ available in the installers blob container. The default may differ from what you provide, so you will need to update accordingly.
Once all fields have been completed, check the checkbox and click Purchase. The only indication that the deployment is occurring will be in the Bell Icon in the top right corner. You can click on Deployment in progress to view the current status and review and issues if they occur.
The total time for deployment will be approximately 30 minutes.
6
3. Avid Media Composer Configuration.
After the completion of the deployment, the Media Composer VMs will require Avid Licensing as well as Teradici installation.
1. Login into https://portal.azure.com.
2. Select the Resource Group created during deployment.
3. Find the Media Composer VM. It will end with -mc-vm0x where “x” is the number of the Media Composer.
4. View the details on the VM and get the Public IP address.
5. Use a Remote Desktop Client to RDP into the Media Composer VM.
7
6. Double-click on the PCoIP installer located on the Desktop.
7. Complete the installer, and provide the license key when requested.
8. Reboot the Media Composer VM.
9. Open the PCoIP Client on the local machine.
8
10. Click New Connection.
11. Enter the public IP address for the VM and give it a name. The name will be what the system is saved as inside the PCoIP Client.
12. Click Next.
13. Enter the login credentials.
9
14. Select your default view for this connection. This can be changed later.
15. You should now be connected to the Windows Desktop.
16. Open the Avid Link application. (Avid Link is an app available from Avid.com for creatives looking to find, connect, and collaborate with other artists, producers, mixers, composers, editors, for creative opportunities.)
10
17. Apply the Media Composer license you have received from your Avid representative.
18. Apply the VM Option license you have received from your Avid representative.
19. License and connect to your Avid NEXIS as instructed in the following section.
20. Launch Media Composer.
11
21. Create or open a Project, and enjoy editing in the Cloud.
4. Avid NEXIS Storage Configuration.
Licensing and Initial Setup:
After the deployment is complete, the Avid NEXIS Storage will require licensing before it will be accessible from the Media Composer VMs. To activate your license, complete the following:
1. Login into https://portal.azure.com.
2. Select the Resource Group created during deployment.
3. Find the Avid NEXIS VM. It will end with: -sd-vm01
4. View the details on the VM and get the Private IP address.
5. Connect to a Media Composer VM using the Teradici PCoIP client.
6. In a web browser enter the private IP address for the Avid NEXIS VM.
12
7. Login using the username Administrator and the password defined during the deployment.
8. After you have logged in select the License tab.
9. Under Activation, select the method for activation. In many cases, Online activation will be successful; in instances where the Azure Virtual Network does not have access to the public internet use Offline.
10. Enter the Avid NEXIS license information you have received from your Avid representative.
11. Click Activate.
12. The system will display a warning that a new license will be applied. Click OK.
13
13. The Avid NEXIS will apply the license; be patient as this can take up to a few minutes. When complete you will receive a popup stating that the license was successfully activated. Click Close.
14. You will be presented with the Login page. Login again using the same credentials.
After you have logged in, the system will display that “No Avid NEXIS File System” exists.
15. Select Create New File System from the pulldown. If this is a replacement license for an existing system you will not see this page. Creating a new filesystem on an existing system will remove all data from the system.
16. Click Submit.
17. A warning will be displayed that a New File System will be created. Click OK.
18. When the filesystem has successfully been created, a popup will appear. Click Close.
19. Log in again using the credentials from before. Be patient while the system finishes applying the changes. It may take a few minutes.
20. The Avid NEXIS Dashboard will be presented.
14
21. In the left column, select Storage and then click on Media Packs.
22. There should be a single Media Pack listed. Click on the link icon to the right.
23. A warning will be displayed asking for confirmation to bind the Media Pack. Click OK.
24. Once the Media Pack is bound to the system, it will initially display a Red Dot, and show that the Credentials are invalid. Select Storage Groups under Storage in the left column.
25. Create a new Storage Group by clicking the “+” icon in the upper right of the screen.
26. The name of the Storage Group can be left as the default or renamed as desired.
For the next two fields, Account Name and Account Key, we will need to gather information from the Azure Portal.
27. Login into https://portal.azure.com.
28. Select the Resource Group created during deployment.
29. Find the Avid NEXIS storage account. (It will end with nexisonline.)
30. Select the storage account. In the left column under Settings, select Access keys.
31. Copy the Storage account name and paste it into the Account Name field in the Avid NEXIS Management Console.
32. Copy one of the Key values and paste it into the Account Key in the Avid NEXIS Management Console.
15
33. Under the Media Packs section, select the checkbox to the right of the Media Pack. Click the “+” icon immediately above.
34. Click the orange Save icon in the upper right of the screen.
35. The Media Pack is now connected to the storage group created and should show Active - Bound (Green Dot) under the Media Packs page.
36. The Avid NEXIS is now ready for workspace and user creation.
Creating Workspaces:
After the license and Storage Group are set up, the system is ready for the creation of workspaces. A Workspace is a virtual volume that exist on the Storage Group and can be resized dynamically. You could create one or more workspaces for any given project.
1. Connect to a Media Composer VM using the Teradici PCoIP client.
2. In a web browser, enter the private IP address for the Avid NEXIS VM.
3. Login using the username Administrator and the password defined during the deployment.
4. In the left column, select Storage and then click on Workspaces.
5. Click on the “+” icon in the top right.
6. Enter a name for the workspace. (This can be changed later.)
7. The Storage Group should already be defaulted to the one created during setup.
16
8. Enter a size for the workspace in MB (Megabytes). This can be adjusted at any time to meet the needs of the project or workflow.
9. Click the orange Save icon in the upper right. The workspace will now appear in the list, and the total capacity of the system will be displayed showing the amount allocated to active workspaces.
Creating Users:
Now that your Workspaces have been created, you will need to create Users. Users can be assigned to any number of Workspaces. A new system will only have a user named “Guest” which will have no privileges by default. To create additional users, do the following:
1. Connect to a Media Composer VM using the Teradici PCoIP client.
2. In a web browser, enter the private IP address for the Avid NEXIS VM.
3. Login using the username Administrator and the password defined during the deployment.
4. In the left column, select Users and then click on Users.
5. Click on the “+” icon in the top right of the screen.
6. Enter a username and password for the user. Please note that the user can update this from the NEXIS Client.
17
7. Under Workspace Access, select the checkbox the right of the workspaces you would like to grant this user access.
8. Click the permission level you want to assign:
• Circle = no access
• Eye = read-only
• Pencil = read and write
9. Click the orange Save icon in the upper right when complete.
10. Permissions can be updated at any time by double-clicking on a User in the list.
Mounting Avid NEXIS Workspaces on the Media Composer VM:
You should now have a Media Composer and Avid NEXIS ready for use. To mount the Avid NEXIS workspace on the Media Composer VM for use in editing, complete the following:
1. Connect to a Media Composer VM using the Teradici PCoIP client.
2. Open the Avid NEXIS Client Manager.
3. Click on the Remote Hosts icon along the top (the two connected computers).
18
4. Enter the IP address for the Avid NEXIS VM and click the green “+” icon.
5. Click the green check icon at the bottom and then close the popup.
6. Avid NEXIS should appear under the Systems list shortly.
7. Double-click on the system, and enter the credentials for one of the generated users.
8. The list of Workspaces for which the user has permissions will appear in the Workspaces section.
19
9. Double-click on a workspace to mount it to the Media Composer VM.
10. The Avid NEXIS workspaces will be available in File Explorer under Network Locations.
20
5. Signiant Upload Portal Configuration.
After the Signiant Media Shuttle VM is deployed, you will need to configure the Avid NEXIS client. Please Note: Check that the server is visible in Signiant Media Shuttle management portal “Storage” tab (https://manage.mediashuttle.com/). If the server is not visible, that means the registration key provided during setup was invalid. Please refer to the Appendix C for steps to troubleshoot and replace the registration key.
Configure the client by doing the following:
1. Login to https://portal.azure.com.
2. Select the Resource Group created during deployment.
3. Find the Signiant Media Shuttle VM. It will end with -sig-vm
4. View the details on the VM and get the Public IP address.
5. Use a Remote Desktop Client to RDP into the Signiant Media Shuttle VM.
6. Double-click on the Signiant Media Shuttle installer (install_signiant_media_shuttle.exe) located on the Desktop.
7. Complete the installer, and provide the registration key when requested. (You can find the Media Shuttle folder under the “Start” menu.)
8. You will now need to mount the Avid NEXIS workspace as per above.
1. Open the Avid NEXIS Client Manager.
2. Click on the Remote Hosts icon along the top (the two connected computers).
3. Enter the IP address for the Avid NEXIS VM and click the green “+” icon.
4. Click the green check icon at the bottom and then close the popup.
5. Avid NEXIS should appear under the Systems list shortly.
6. Double-click on the system, and enter the credentials for one of the generated users.
7. The list of Workspaces for which the user has permissions will appear in the Workspaces section.
8. Double-click on a workspace to mount it to the Signiant Media Shuttle VM.
9. The Avid NEXIS workspaces will be available in File Explorer under Network Locations.
21
After configuring the Avid NEXIS client, you are ready to create the Signiant Portal and configure it for upload.
1. Log into https://manage.mediashuttle.com
2. Click on Add Portal from the dropdown in the upper right.
3. Select Share.
4. Under General, enter a name and URL for the portal.
5. Under Storage, click Assign next to the Avid NEXIS generated during deployment.
6. In Path, enter the path where the Avid NEXIS is mounted on the Signiant VM.
7. On the General page, select Open URL.
8. Select Manage portal from the Options dropdown in the upper right.
22
9. Select Members from the left column, and add any users and set any permissions required.
10. Set any other customizations or configurations as required.
23
11. Access to the portal will be available to any users added at the URL specified at: https://manage.mediashuttle.com
Appendix A: Verifying Resource Quotas.
Deployment of Media Composer VMs requires NV or NVSv3 Family Compute CPUs. You can refer to https://azure.microsoft.com/en-us/global-infrastructure/services/?products=virtual-machines for availability. To verify you have enough available resources in your account, complete the following:
1. Login to https://portal.azure.com
2. Search Subscription in the search bar at the top of the page.
3. Select your current subscription.
4. In the left column under the Settings heading, select Usage + quotas.
5. In the filters, update the following:
• All service quotas
• Microsoft.Compute
• Select the desired resource regions
• Show all
• Type NV into the search box to filter to only NV Family Resources.
24
6. Ensure that the available quota is enough for the number of Media Composer VMs you plan on creating. Each Media Composer requires 12 Compute cores.
If you have availability, then you are done. To increase your quota, complete the following:
1. Click on Request Increase in the upper-right corner.
2. Select Compute-VM as the quota type and click Next.
3. Click Provide details. A side panel will appear.
4. In the side panel select the following:
• Resource Manager
• Select the desired region(s) where you would like to increase the quota. For each selected region:
o Select the SKU requested. It will be either NV Series or NVSv3 Series depending on the type of resource required.
o Enter the requested new limit.
5. Click Save and Continue.
6. Select the severity and preferred contact method.
7. Provide contact information.
8. Click Next: Review + create.
9. Review the request and submit.
25
Appendix B: Deployment Installer Access.
The deployment script requires that you provide access to the required software installers. You can find the installers for download at the following locations:
• Avid Media Composer:
o https://esd.avid.com/ProductInformation.aspx?id=7
o Must upload the .zip file downloaded
• Avid NEXIS Client:
o 2019.4 or higher
o https://esd.avid.com/ProductInformation.aspx?id=100
o Must upload the Windows .msi
• Nvidia GRID drivers:
o https://docs.microsoft.com/en-us/azure/virtual-machines/windows/n-series-driver-setup
o Must upload the .exe
• Teradici PCoIP Graphics Agent for Windows:
o https://docs.teradici.com/find/product/cloud-access-software
o Must upload the .exe
• Signiant Media Shuttle:
o https://manage.mediashuttle.com
o Must upload the .exe
The easiest way to provide the deployment script access to the requisite installers is through an Azure Blob. To create a Blob for this, complete the following:
1. Login to https://portal.azure.com.
2. Click Create a resource in the upper left.
3. Search for Storage Account.
4. On the Information page click Create.
26
5. Complete the Basics page:
• Subscription is the subscription you would like to deploy the storage account into. If you only have one subscription, that will be the only option.
• Resource Group is the Resource Group of the subscription where the storage account will be deployed to. If you do not already have one, or if you want to deploy to a different one, you can click Create new.
• Storage Account Name is a globally-unique name used by the storage account. Examples could be “azureeditinstallers” or “avidcloudinstallers.”
• Location is the Azure region where the storage account will exist. It is recommended that this be geographically near to you.
• Performance determines the type of disk backing the storage account. Standard is traditional spinning disks while Premium is solid state disks. For this storage account Standard is sufficient.
• Account kind specifies what services will be available in the storage account. General purpose provides blob, file, table, and queue storage in a single account. Blob storage is specialized for storing blob data. While both will work this guide will be using StorageV2 (general purpose v2).
• Replication specifies what data replication, if any, is used to protect the storage account. This guide will use LRS (locally redundant storage). For more information on replication read here https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy.
• Access tier (default) specifies the default tier when creating blobs unless specified during blob creation. The recommendation is to leave this at the default: Hot.
27
6. Click Review + Create.
7. Review the settings and click Create.
8. You will be redirected to a page showing the status of the deployment. This should take 1-2 minutes.
9. When complete click on Go to Resource.
10. In the left column under Blob service, click Blobs.
11. Click + Container.
12. Name the container installers with a Public access level of Blob.
13. Click OK.
14. Click on installers to enter the blob.
15. Click Upload along the top bar.
16. In the sidebar that appears, click the folder option to browse for the downloaded installers.
17. Select an installer, and select Open, then click Upload.
18. Repeat steps 15-17 for all installers. When requested in the deployment template, you will need the Blob URL as well as the full filename for the installers you have uploaded. The Blob URL will be the name of the storage account followed by “blob.core.windows.net.”
28
Appendix C: Troubleshooting.
Deployment Issues:
Media Composer Deployment Failure.
If you experience deployment failures for the Media Composer VM, open the Operation details and read the error message. The two most common reasons for failure are:
i. Insufficient quota. If the error states an insufficient quota or no resource available verify that your subscription has a quota for the NV and/or NVS_v3 Series VMs in the region you are deploying into. See Appendix A for more information.
ii. No resource type available. If you have confirmed you have sufficient quota verify that the type of resource requested is available in the desired Azure region. Refer to https://azure.microsoft.com/en-us/global-infrastructure/services/?products=virtual-machines for product availability.
Bad Request: Resource Unavailable.
If you experience deployment failures where the error lists “Bad Request,” it is likely that the storage blob created to hold the installers is not configured correctly. Please refer to Appendix B for details on configuring the Blob container correctly.
Avid NEXIS Storage:
In environments where the Azure virtual network is isolated from the public internet, an online activation will not be possible. In this case, select “Offline” during the activation of the Avid NEXIS license. The page will update and present you with a Device ID. You will need the Device ID as well as the System ID and Activation Code for the next steps:
1. In a web browser, go to https://avid.com/activate .
2. Enter the information requested.
3. Click Submit.
4. You can then download the license file, or if you provided an email address it will be emailed to you.
5. Copy the .bin file to the Media Composer VM where you are configuring Avid NEXIS.
6. Select Browse and select the .bin license file.
7. After successful activation, continue as directed in the Avid NEXIS Configuration section.




</body>
</html>